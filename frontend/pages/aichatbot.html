<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Companion - Your Virtual Friend</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            height: 100vh;
            overflow: hidden;
            background: linear-gradient(135deg, #a1c4fd 0%, #c2e9fb 100%);
            perspective: 1000px;
            position: relative;
            animation: hueShift 20s infinite alternate;
        }

        @keyframes hueShift {
            0% {
                background: linear-gradient(135deg, #a1c4fd 0%, #c2e9fb 100%);
            }
            25% {
                background: linear-gradient(135deg, #d4fc79 0%, #96e6a1 100%);
            }
            50% {
                background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%);
            }
            75% {
                background: linear-gradient(135deg, #a6c0fe 0%, #f68084 100%);
            }
            100% {
                background: linear-gradient(135deg, #ccfbfe 0%, #ef9fbc 100%);
            }
        }

        /* Vertical Navigation Bar */
        .vertical-nav {
            position: fixed;
            top: 0;
            left: 0;
            width: 200px;
            height: 100vh;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            padding-top: 20px;
            z-index: 1000;
            border-right: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 5px 0 15px rgba(0, 0, 0, 0.1);
        }

        .nav-item {
            width: 100%;
            height: 50px;
            margin: 15px 0;
            border-radius: 12px;
            display: flex;
            justify-content: flex-start;
            align-items: center;
            color: white;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            padding: 0 20px;
        }

        .nav-item i {
            margin-right: 15px;
            font-size: 20px;
            width: 20px;
            text-align: center;
        }

        .nav-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.2);
            transform: translateX(-100%);
            transition: transform 0.3s ease;
        }

        .nav-item:hover::before {
            transform: translateX(0);
        }

        .nav-item:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateX(5px);
        }

        .nav-item.active {
            background: rgba(255, 255, 255, 0.25);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .nav-item.active::after {
            content: '';
            position: absolute;
            right: -15px;
            height: 30px;
            width: 4px;
            background: white;
            border-radius: 2px;
        }

        .nav-tooltip {
            position: absolute;
            left: 200px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 12px;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
        }

        .nav-item:hover .nav-tooltip {
            opacity: 1;
        }

        /* 3D Background Elements */
        .bg-3d {
            position: absolute;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: -1;
        }

        .floating-shape {
            position: absolute;
            border-radius: 50%;
            filter: blur(5px);
            opacity: 0.7;
            animation: float 15s infinite ease-in-out;
        }

        .shape1 {
            width: 300px;
            height: 300px;
            background: linear-gradient(45deg, rgba(255, 107, 107, 0.7), rgba(255, 142, 83, 0.7));
            top: -150px;
            left: -150px;
            animation-duration: 20s;
        }

        .shape2 {
            width: 400px;
            height: 400px;
            background: linear-gradient(45deg, rgba(79, 172, 254, 0.7), rgba(0, 242, 254, 0.7));
            bottom: -200px;
            right: -200px;
            animation-duration: 25s;
        }

        .shape3 {
            width: 250px;
            height: 250px;
            background: linear-gradient(45deg, rgba(250, 112, 154, 0.7), rgba(254, 225, 64, 0.7));
            top: 50%;
            left: 30%;
            animation-duration: 18s;
        }

        .shape4 {
            width: 200px;
            height: 200px;
            background: linear-gradient(45deg, rgba(48, 207, 208, 0.7), rgba(51, 8, 103, 0.7));
            top: 20%;
            right: 10%;
            animation-duration: 22s;
        }

        /* New 3D Elements */
        .orb {
            position: absolute;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 0.1));
            box-shadow: 0 0 60px rgba(255, 255, 255, 0.5);
            animation: floatOrb 20s infinite ease-in-out;
        }

        .orb1 {
            width: 80px;
            height: 80px;
            top: 15%;
            left: 10%;
            animation-duration: 18s;
        }

        .orb2 {
            width: 60px;
            height: 60px;
            bottom: 20%;
            right: 15%;
            animation-duration: 22s;
        }

        .orb3 {
            width: 100px;
            height: 100px;
            top: 60%;
            left: 5%;
            animation-duration: 25s;
        }

        @keyframes float {
            0%, 100% {
                transform: translate(0, 0) rotate(0deg) scale(1);
            }
            25% {
                transform: translate(20px, -20px) rotate(5deg) scale(1.05);
            }
            50% {
                transform: translate(-10px, 10px) rotate(-5deg) scale(0.95);
            }
            75% {
                transform: translate(15px, 15px) rotate(3deg) scale(1.02);
            }
        }

        @keyframes floatOrb {
            0%, 100% {
                transform: translate(0, 0) translateY(0);
            }
            25% {
                transform: translate(15px, -15px) translateY(-10px);
            }
            50% {
                transform: translate(-10px, 10px) translateY(5px);
            }
            75% {
                transform: translate(10px, 10px) translateY(-5px);
            }
        }

        /* Particle Effect */
        .particles {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: -1;
        }

        .particle {
            position: absolute;
            width: 5px;
            height: 5px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.8);
            animation: particleFloat 15s infinite linear;
        }

        @keyframes particleFloat {
            0% {
                transform: translateY(100vh) translateX(0);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100vh) translateX(100px);
                opacity: 0;
            }
        }

        /* Main Container */
        .container {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            padding: 20px;
            padding-left: 220px;
            transform-style: preserve-3d;
            transform: rotateX(5deg);
        }

        /* Chatbot Container */
        .chatbot-container {
            width: 100%;
            max-width: 80%;
            height: 80vh;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            transform: translateZ(50px);
            transition: transform 0.3s ease;
            position: relative;
        }

        .chatbot-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0));
            pointer-events: none;
            z-index: 1;
        }

        .chatbot-container:hover {
            transform: translateZ(80px) scale(1.02);
        }

        /* Header */
        .chatbot-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .chatbot-header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.2) 0%, rgba(255,255,255,0) 70%);
            animation: pulse 4s infinite;
        }

        @keyframes pulse {
            0% {
                transform: scale(0.8);
                opacity: 0.5;
            }
            50% {
                transform: scale(1.2);
                opacity: 0.3;
            }
            100% {
                transform: scale(0.8);
                opacity: 0.5;
            }
        }

        .chatbot-header h1 {
            font-size: 35px;
            margin-bottom: 5px;
            position: relative;
            z-index: 1;
        }

        .chatbot-header p {
            font-size: 25px;
            opacity: 0.8;
            position: relative;
            z-index: 1;
        }

        .ai-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: white;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0 auto 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            position: relative;
            z-index: 1;
            animation: avatarPulse 3s infinite alternate;
        }

        @keyframes avatarPulse {
            0% {
                box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            }
            100% {
                box-shadow: 0 5px 25px rgba(102, 126, 234, 0.6);
            }
        }

        .ai-avatar i {
            font-size: 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: iconRotate 10s infinite linear;
        }

        @keyframes iconRotate {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }

        /* Chat Messages */
        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background-color: #f8f9fa;
            display: flex;
            flex-direction: column;
            gap: 15px;
            position: relative;
        }

        .chat-messages::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><rect width="100" height="100" fill="white" fill-opacity="0.03"/><path d="M0 0L100 100M100 0L0 100" stroke="gray" stroke-width="0.5" stroke-opacity="0.05"/></svg>');
            pointer-events: none;
        }

        .message {
            max-width: 80%;
            padding: 12px 16px;
            border-radius: 18px;
            position: relative;
            animation: fadeIn 0.3s ease;
            z-index: 2;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .user-message {
            align-self: flex-end;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-bottom-right-radius: 5px;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .ai-message {
            align-self: flex-start;
            background: white;
            color: #333;
            border-bottom-left-radius: 5px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .message-time {
            font-size: 11px;
            opacity: 0.7;
            margin-top: 5px;
            text-align: right;
        }

        .ai-message .message-time {
            text-align: left;
        }

        /* Chat Input */
        .chat-input-container {
            padding: 15px;
            background: white;
            border-top: 1px solid #eee;
            display: flex;
            flex-direction: column;
            gap: 10px;
            position: relative;
            z-index: 2;
        }

        .emoji-buttons {
            display: flex;
            gap: 8px;
            overflow-x: auto;
            padding: 5px 0;
            scrollbar-width: thin;
            scrollbar-color: rgba(0, 0, 0, 0.1) transparent;
        }

        .emoji-buttons::-webkit-scrollbar {
            height: 5px;
        }

        .emoji-buttons::-webkit-scrollbar-track {
            background: transparent;
        }

        .emoji-buttons::-webkit-scrollbar-thumb {
            background-color: rgba(0, 0, 0, 0.1);
            border-radius: 10px;
        }

        .emoji-btn {
            width: 35px;
            height: 35px;
            border: none;
            border-radius: 50%;
            background: #f1f1f1;
            cursor: pointer;
            font-size: 18px;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.2s ease;
            position: relative;
            overflow: hidden;
        }

        .emoji-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(102, 126, 234, 0.5);
            transform: translate(-50%, -50%);
            transition: width 0.3s, height 0.3s;
        }

        .emoji-btn:hover::before {
            width: 100%;
            height: 100%;
        }

        .emoji-btn:hover {
            background: #e0e0e0;
            transform: scale(1.2);
        }

        .emoji-btn:active {
            transform: scale(0.9);
        }

        .input-wrapper {
            display: flex;
            gap: 10px;
        }

        .chat-input {
            flex: 1;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 25px;
            outline: none;
            font-size: 14px;
            transition: all 0.3s;
            background: rgba(255, 255, 255, 0.8);
        }

        .chat-input:focus {
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.2);
            background: white;
        }

        .send-btn {
            width: 45px;
            height: 45px;
            border: none;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .send-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.5s, height 0.5s;
        }

        .send-btn:hover::before {
            width: 100%;
            height: 100%;
        }

        .send-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .send-btn:active {
            transform: scale(0.95);
        }

        /* Typing Indicator */
        .typing-indicator {
            display: flex;
            padding: 10px 15px;
            background: white;
            border-radius: 18px;
            border-bottom-left-radius: 5px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            width: fit-content;
        }

        .typing-indicator span {
            height: 10px;
            width: 10px;
            border-radius: 50%;
            background-color: #9e9e9e;
            display: inline-block;
            margin: 0 2px;
            animation: typing 1.4s infinite;
        }

        .typing-indicator span:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-indicator span:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typing {
            0%, 60%, 100% {
                transform: translateY(0);
                opacity: 0.7;
            }
            30% {
                transform: translateY(-10px);
                opacity: 1;
            }
        }

        /* Interactive Features */
        .feature-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .feature-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
        }

        .feature-menu {
            position: fixed;
            bottom: 90px;
            right: 20px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
            padding: 15px;
            display: none;
            flex-direction: column;
            gap: 10px;
            z-index: 999;
            min-width: 200px;
        }

        .feature-menu.active {
            display: flex;
        }

        .feature-item {
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .feature-item:hover {
            background: #f5f5f5;
            transform: translateX(-5px);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .vertical-nav {
                width: 60px;
            }
            
            .nav-item {
                width: 50px;
                height: 50px;
                font-size: 18px;
                padding: 0;
                justify-content: center;
            }
            
            .nav-item span {
                display: none;
            }
            
            .nav-item i {
                margin-right: 0;
            }
            
            .container {
                padding-left: 70px;
                transform: rotateX(0deg);
            }
            
            .chatbot-container {
                height: 90vh;
                max-width: 100%;
                border-radius: 0;
            }
            
            .chatbot-container:hover {
                transform: none;
            }
            
            .feature-btn {
                bottom: 15px;
                right: 15px;
                width: 50px;
                height: 50px;
                font-size: 20px;
            }
            
            .feature-menu {
                bottom: 75px;
                right: 15px;
                min-width: 180px;
            }
        }
    </style>
    <script type="module" src="/frontend/js/firebase.js"></script>
    <script type="module" src="../js/authguard.js"></script>
</head>
<body>
    <!-- Vertical Navigation Bar -->
    <div class="vertical-nav">
        <div class="nav-item">
            <i class="fas fa-home"></i>
            <span>Home</span>
            <span class="nav-tooltip">Home</span>
        </div>
        <div class="nav-item active">
            <i class="fas fa-robot"></i>
            <span>AI Companion</span>
            <span class="nav-tooltip">AI Companion</span>
        </div>
        <div class="nav-item">
            <i class="fas fa-users"></i>
            <span>Community</span>
            <span class="nav-tooltip">Community</span>
        </div>
        <div class="nav-item">
            <i class="fas fa-user"></i>
            <span>Profile</span>
            <span class="nav-tooltip">Profile</span>
        </div>
    </div>

    <!-- 3D Background Elements -->
    <div class="bg-3d">
        <div class="floating-shape shape1"></div>
        <div class="floating-shape shape2"></div>
        <div class="floating-shape shape3"></div>
        <div class="floating-shape shape4"></div>
        
        <!-- New 3D Orbs -->
        <div class="orb orb1"></div>
        <div class="orb orb2"></div>
        <div class="orb orb3"></div>
        
        <!-- Particles -->
        <div class="particles" id="particles"></div>
    </div>

    <!-- Main Container -->
    <div class="container">
        <!-- Chatbot Container -->
        <div class="chatbot-container">
            <!-- Chatbot Header -->
            <div class="chatbot-header">
                <div class="ai-avatar">
                    <i class="fas fa-robot"></i>
                </div>
                <h1>AI Companion</h1>
                <p>Your virtual friend is here to chat</p>
            </div>

            <!-- Chat Messages -->
            <div class="chat-messages" id="chatMessages">
                <div class="message ai-message">
                    Hello! I'm your AI companion. How can I help you today?
                    <div class="message-time">Just now</div>
                </div>
            </div>

            <!-- Chat Input -->
            <div class="chat-input-container">
                <!-- Emoji Buttons -->
                <div class="emoji-buttons">
                    <button class="emoji-btn" onclick="addEmoji('üòÄ')">üòÄ</button>
                    <button class="emoji-btn" onclick="addEmoji('üòÇ')">üòÇ</button>
                    <button class="emoji-btn" onclick="addEmoji('üòç')">üòç</button>
                    <button class="emoji-btn" onclick="addEmoji('ü§î')">ü§î</button>
                    <button class="emoji-btn" onclick="addEmoji('üòé')">üòé</button>
                    <button class="emoji-btn" onclick="addEmoji('üëç')">üëç</button>
                    <button class="emoji-btn" onclick="addEmoji('‚ù§Ô∏è')">‚ù§Ô∏è</button>
                    <button class="emoji-btn" onclick="addEmoji('üî•')">üî•</button>
                    <button class="emoji-btn" onclick="addEmoji('‚ú®')">‚ú®</button>
                    <button class="emoji-btn" onclick="addEmoji('üéâ')">üéâ</button>
                </div>

                <!-- Input and Send Button -->
                <div class="input-wrapper">
                    <input type="text" class="chat-input" id="chatInput" placeholder="Type a message...">
                    <button class="send-btn" id="sendBtn">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Feature Button -->
    <button class="feature-btn" id="featureBtn">
        <i class="fas fa-magic"></i>
    </button>

    <!-- Feature Menu -->
    <div class="feature-menu" id="featureMenu">
        <div class="feature-item" onclick="changeTheme()">
            <i class="fas fa-palette"></i>
            <span>Change Theme</span>
        </div>
        <div class="feature-item" onclick="clearChat()">
            <i class="fas fa-trash"></i>
            <span>Clear Chat</span>
        </div>
        <div class="feature-item" onclick="exportChat()">
            <i class="fas fa-download"></i>
            <span>Export Chat</span>
        </div>
        <div class="feature-item" onclick="toggleParticles()">
            <i class="fas fa-sparkles"></i>
            <span>Toggle Particles</span>
        </div>
    </div>

    <script>
        // DOM Elements
        const chatMessages = document.getElementById('chatMessages');
        const chatInput = document.getElementById('chatInput');
        const sendBtn = document.getElementById('sendBtn');
        const featureBtn = document.getElementById('featureBtn');
        const featureMenu = document.getElementById('featureMenu');
        const particlesContainer = document.getElementById('particles');

        // Sample AI responses
        const aiResponses = [
            "That's interesting! Tell me more.",
            "I understand how you feel.",
            "Thanks for sharing that with me!",
            "How does that make you feel?",
            "I'm here to listen. What else is on your mind?",
            "That's a great point!",
            "I appreciate you opening up to me.",
            "What do you think about that?",
            "I'm learning so much from our conversation!",
            "That sounds wonderful!",
            "I'd love to hear more about your thoughts on this.",
            "That's a fascinating perspective!",
            "How long have you been thinking about this?",
            "What would you like to explore next?",
            "I'm here to support you in any way I can."
        ];

        // Initialize particles
        function createParticles() {
            const particleCount = 30;
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.classList.add('particle');
                
                // Random position
                const posX = Math.random() * 100;
                const delay = Math.random() * 15;
                const size = Math.random() * 5 + 2;
                const duration = Math.random() * 10 + 15;
                
                particle.style.left = `${posX}%`;
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                particle.style.animationDelay = `${delay}s`;
                particle.style.animationDuration = `${duration}s`;
                
                particlesContainer.appendChild(particle);
            }
        }

        // Create particles on load
        createParticles();

        // Toggle particles
        let particlesVisible = true;
        function toggleParticles() {
            particlesVisible = !particlesVisible;
            particlesContainer.style.display = particlesVisible ? 'block' : 'none';
            featureMenu.classList.remove('active');
        }

        // Theme options
        const themes = [
            {
                name: 'Ocean',
                gradient: 'linear-gradient(135deg, #a1c4fd 0%, #c2e9fb 100%)',
                colors: ['#667eea', '#764ba2']
            },
            {
                name: 'Forest',
                gradient: 'linear-gradient(135deg, #d4fc79 0%, #96e6a1 100%)',
                colors: ['#11998e', '#38ef7d']
            },
            {
                name: 'Sunset',
                gradient: 'linear-gradient(135deg, #a6c0fe 0%, #f68084 100%)',
                colors: ['#f093fb', '#f5576c']
            },
            {
                name: 'Lavender',
                gradient: 'linear-gradient(135deg, #ccfbfe 0%, #ef9fbc 100%)',
                colors: ['#4facfe', '#00f2fe']
            }
        ];

        let currentTheme = 0;

        // Change theme
        function changeTheme() {
            currentTheme = (currentTheme + 1) % themes.length;
            const theme = themes[currentTheme];
            
            document.body.style.background = theme.gradient;
            
            // Update chatbot header gradient
            const header = document.querySelector('.chatbot-header');
            header.style.background = `linear-gradient(135deg, ${theme.colors[0]} 0%, ${theme.colors[1]} 100%)`;
            
            // Update send button gradient
            const sendBtn = document.querySelector('.send-btn');
            sendBtn.style.background = `linear-gradient(135deg, ${theme.colors[0]} 0%, ${theme.colors[1]} 100%)`;
            
            // Update user message gradient
            const style = document.createElement('style');
            style.innerHTML = `.user-message { background: linear-gradient(135deg, ${theme.colors[0]} 0%, ${theme.colors[1]} 100%) !important; }`;
            document.head.appendChild(style);
            
            featureMenu.classList.remove('active');
        }

        // Clear chat
        function clearChat() {
            chatMessages.innerHTML = `
                <div class="message ai-message">
                    Hello! I'm your AI companion. How can I help you today?
                    <div class="message-time">Just now</div>
                </div>
            `;
            featureMenu.classList.remove('active');
        }

        // Export chat
        function exportChat() {
            const messages = [];
            const messageElements = chatMessages.querySelectorAll('.message');
            
            messageElements.forEach(el => {
                const isUser = el.classList.contains('user-message');
                const text = el.childNodes[0].textContent.trim();
                const time = el.querySelector('.message-time').textContent;
                
                messages.push({
                    sender: isUser ? 'You' : 'AI Companion',
                    text: text,
                    time: time
                });
            });
            
            const chatData = JSON.stringify(messages, null, 2);
            const blob = new Blob([chatData], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = 'ai-companion-chat.json';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            featureMenu.classList.remove('active');
        }

        // Feature menu toggle
        featureBtn.addEventListener('click', () => {
            featureMenu.classList.toggle('active');
        });

        // Close feature menu when clicking outside
        document.addEventListener('click', (e) => {
            if (!featureBtn.contains(e.target) && !featureMenu.contains(e.target)) {
                featureMenu.classList.remove('active');
            }
        });

        // Function to add emoji to input
        function addEmoji(emoji) {
            chatInput.value += emoji;
            chatInput.focus();
        }

        // Function to get current time
        function getCurrentTime() {
            const now = new Date();
            return now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
        }

        // Function to add message to chat
        function addMessage(message, isUser = false) {
            const messageDiv = document.createElement('div');
            messageDiv.classList.add('message', isUser ? 'user-message' : 'ai-message');
            
            const messageContent = document.createElement('div');
            messageContent.textContent = message;
            
            const messageTime = document.createElement('div');
            messageTime.classList.add('message-time');
            messageTime.textContent = getCurrentTime();
            
            messageDiv.appendChild(messageContent);
            messageDiv.appendChild(messageTime);
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Function to show typing indicator
        function showTypingIndicator() {
            const typingDiv = document.createElement('div');
            typingDiv.classList.add('typing-indicator');
            typingDiv.id = 'typingIndicator';
            
            for (let i = 0; i < 3; i++) {
                const span = document.createElement('span');
                typingDiv.appendChild(span);
            }
            
            chatMessages.appendChild(typingDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Function to remove typing indicator
        function removeTypingIndicator() {
            const typingIndicator = document.getElementById('typingIndicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
        }

        // Function to send message
        function sendMessage() {
            const message = chatInput.value.trim();
            if (message === '') return;
            
            // Add user message
            addMessage(message, true);
            chatInput.value = '';
            
            // Show typing indicator
            showTypingIndicator();
            
            // Simulate AI response after delay
            setTimeout(() => {
                removeTypingIndicator();
                const randomResponse = aiResponses[Math.floor(Math.random() * aiResponses.length)];
                addMessage(randomResponse);
            }, 1500);
        }

        // Event listeners
        sendBtn.addEventListener('click', sendMessage);
        
        chatInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });

        // Add some initial messages for demonstration
        setTimeout(() => {
            addMessage("I'm here to chat with you about anything you'd like!");
        }, 1000);

        setTimeout(() => {
            addMessage("Feel free to ask me questions or share your thoughts.");
        }, 2000);

        // Add interactive hover effects to navigation items
        const navItems = document.querySelectorAll('.nav-item');
        navItems.forEach(item => {
            item.addEventListener('click', function() {
                navItems.forEach(nav => nav.classList.remove('active'));
                this.classList.add('active');
            });
        });
    </script>
</body>
</html>