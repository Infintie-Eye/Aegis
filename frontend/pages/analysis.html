<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aegis - 3D Personality & Emotional Analysis</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        body {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 25%, #f093fb 50%, #4facfe 75%, #00f2fe 100%);
            background-size: 400% 400%;
            animation: gradientBG 20s ease infinite;
            color: #fff;
            overflow-x: hidden;
            padding: 20px;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .star {
            position: absolute;
            width: 2px;
            height: 2px;
            background: white;
            border-radius: 50%;
            animation: twinkle 3s infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.2; }
            50% { opacity: 1; }
        }

        .container {
            width: 100%;
            max-width: 900px;
            position: relative;
            z-index: 1;
        }

        .app-header {
            text-align: center;
            margin-bottom: 40px;
            perspective: 1000px;
        }

        .app-logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 15px;
            transform-style: preserve-3d;
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotateY(0); }
            50% { transform: translateY(-20px) rotateY(10deg); }
        }

        .app-logo i {
            font-size: 3.5rem;
            color: #fff;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.7);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .app-title {
            font-size: 3.5rem;
            font-weight: 800;
            background: linear-gradient(90deg, #fff, #a8edea, #fed6e3);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            margin-bottom: 5px;
            letter-spacing: 2px;
        }

        .app-subtitle {
            font-size: 1.6rem;
            color: rgba(255, 255, 255, 0.9);
            font-weight: 500;
            letter-spacing: 1px;
        }

        .assessment-container {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(20px);
            border-radius: 25px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transform-style: preserve-3d;
            position: relative;
            overflow: hidden;
        }

        .assessment-container::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0) 70%);
            animation: rotate 30s linear infinite;
            z-index: -1;
        }

        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .progress-container {
            margin-bottom: 30px;
        }

        .progress-bar {
            height: 10px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }

        .progress {
            height: 100%;
            background: linear-gradient(90deg, #a8edea, #fed6e3);
            border-radius: 10px;
            width: 0%;
            transition: width 0.5s ease;
            position: relative;
        }

        .progress::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .progress-text {
            text-align: center;
            margin-top: 10px;
            font-weight: 600;
            letter-spacing: 1px;
        }

        .question-container {
            display: none;
            animation: fadeIn 0.5s ease;
            transform-style: preserve-3d;
        }

        .question-container.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .question {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 30px;
            text-align: center;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .option {
            display: flex;
            align-items: center;
            padding: 18px 25px;
            background: rgba(255, 255, 255, 0.15);
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            backdrop-filter: blur(10px);
            transform-style: preserve-3d;
            position: relative;
            overflow: hidden;
        }

        .option::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0));
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: -1;
        }

        .option:hover {
            transform: translateY(-5px) rotateX(5deg);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            border-color: rgba(255, 255, 255, 0.3);
        }

        .option:hover::before {
            opacity: 1;
        }

        .option.selected {
            background: rgba(255, 255, 255, 0.25);
            border-color: rgba(255, 255, 255, 0.5);
            transform: scale(1.02);
        }

        .option input {
            margin-right: 15px;
            width: 20px;
            height: 20px;
            accent-color: #fff;
        }

        .option span {
            font-size: 1.1rem;
            font-weight: 500;
        }

        .slider-container {
            margin-top: 20px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        .slider-label {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 15px;
            text-align: center;
        }

        .slider {
            width: 100%;
            height: 12px;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.2);
            outline: none;
            -webkit-appearance: none;
            margin: 15px 0;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            background: linear-gradient(135deg, #a8edea, #fed6e3);
            cursor: pointer;
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.5);
            transition: all 0.2s ease;
        }

        .slider::-webkit-slider-thumb:hover {
            transform: scale(1.2);
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.8);
        }

        .slider::-moz-range-thumb {
            width: 25px;
            height: 25px;
            border-radius: 50%;
            background: linear-gradient(135deg, #a8edea, #fed6e3);
            cursor: pointer;
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.5);
            transition: all 0.2s ease;
        }

        .slider-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.8);
        }

        .btn-container {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .btn {
            padding: 15px 30px;
            background: linear-gradient(135deg, #a8edea, #fed6e3);
            color: #333;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.2);
            transform: translateX(-100%);
            transition: transform 0.3s ease;
        }

        .btn:hover::before {
            transform: translateX(0);
        }

        .btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
        }

        .btn:active {
            transform: translateY(-2px);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .results-container {
            display: none;
            animation: fadeIn 1s ease;
        }

        .result-card {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(20px);
            border-radius: 25px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transform-style: preserve-3d;
            position: relative;
            overflow: hidden;
        }

        .result-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0) 70%);
            animation: rotate 30s linear infinite;
            z-index: -1;
        }

        .result-title {
            font-size: 2.5rem;
            font-weight: 800;
            text-align: center;
            margin-bottom: 30px;
            background: linear-gradient(90deg, #fff, #a8edea, #fed6e3);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .score-container {
            display: flex;
            justify-content: space-around;
            margin-bottom: 40px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .score-item {
            text-align: center;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            backdrop-filter: blur(10px);
            min-width: 200px;
            transform-style: preserve-3d;
            transition: transform 0.3s ease;
        }

        .score-item:hover {
            transform: translateY(-10px) rotateX(10deg);
        }

        .score-value {
            font-size: 4rem;
            font-weight: 800;
            background: linear-gradient(90deg, #a8edea, #fed6e3);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            margin-bottom: 10px;
            line-height: 1;
        }

        .score-label {
            font-size: 1.3rem;
            color: rgba(255, 255, 255, 0.9);
            font-weight: 600;
            letter-spacing: 1px;
        }

        .result-description {
            font-size: 1.2rem;
            color: rgba(255, 255, 255, 0.9);
            line-height: 1.6;
            margin-bottom: 30px;
            text-align: center;
            font-weight: 500;
        }

        .personality-traits {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
        }

        .trait {
            background: linear-gradient(135deg, rgba(168, 237, 234, 0.3), rgba(254, 214, 227, 0.3));
            color: #fff;
            padding: 12px 20px;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transform-style: preserve-3d;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .trait:hover {
            transform: translateY(-5px) rotateX(10deg);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: #f0f;
            position: absolute;
            animation: confetti-fall 3s linear forwards;
            z-index: 1000;
        }

        @keyframes confetti-fall {
            to {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }

        .footer {
            text-align: center;
            margin-top: 40px;
            color: rgba(255, 255, 255, 0.7);
            font-size: 1rem;
        }

        .floating-shapes {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }

        .shape {
            position: absolute;
            opacity: 0.1;
            animation: float-shape 20s infinite linear;
        }

        .shape:nth-child(1) {
            top: 20%;
            left: 10%;
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #a8edea, #fed6e3);
            border-radius: 50%;
            animation-duration: 25s;
        }

        .shape:nth-child(2) {
            top: 60%;
            left: 80%;
            width: 120px;
            height: 120px;
            background: linear-gradient(135deg, #fed6e3, #a8edea);
            border-radius: 30% 70% 70% 30% / 30% 30% 70% 70%;
            animation-duration: 30s;
        }

        .shape:nth-child(3) {
            top: 80%;
            left: 20%;
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, #a8edea, #fed6e3);
            border-radius: 50%;
            animation-duration: 35s;
        }

        @keyframes float-shape {
            0% {
                transform: translateY(0) rotate(0deg);
            }
            50% {
                transform: translateY(-20px) rotate(180deg);
            }
            100% {
                transform: translateY(0) rotate(360deg);
            }
        }

        @media (max-width: 768px) {
            .app-title {
                font-size: 2.5rem;
            }
            
            .question {
                font-size: 1.5rem;
            }
            
            .score-container {
                flex-direction: column;
                align-items: center;
            }
            
            .btn-container {
                flex-direction: column;
                gap: 15px;
            }
            
            .btn {
                width: 100%;
            }
        }
    </style>
    <script type="module" src="/frontend/js/firebase.js"></script>
    <script type="module" src="../js/authguard.js"></script>
</head>
<body>
    <div class="stars" id="stars"></div>
    <div class="floating-shapes">
        <div class="shape"></div>
        <div class="shape"></div>
        <div class="shape"></div>
    </div>

    <div class="container">
        <div class="app-header">
            <div class="app-logo">
                <i class="fas fa-brain"></i>
                <h1 class="app-title">AEGIS</h1>
            </div>
            <p class="app-subtitle">Let's get to know your glorious and amazing self.<br>
                Take this quick test to join US!</br>
            </p>
        </div>

        <div class="assessment-container">
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress" id="progress"></div>
                </div>
                <div class="progress-text" id="progressText">Question 1 of 10</div>
            </div>

            <div id="assessmentContent">
                <!-- Question 1 -->
                <div class="question-container active" data-question="1">
                    <div class="question">If you were a superhero, what would your superpower be?</div>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q1" value="introvert">
                            <span>Mind reading - understanding others' thoughts</span>
                        </label>
                        <label class="option">
                            <input type="radio" name="q1" value="extrovert">
                            <span>Super charisma - inspiring and leading others</span>
                        </label>
                        <label class="option">
                            <input type="radio" name="q1" value="ambivert">
                            <span>Shape-shifting - adapting to any situation</span>
                        </label>
                    </div>
                </div>

                <!-- Question 2 -->
                <div class="question-container" data-question="2">
                    <div class="question">You're planning the ultimate adventure weekend. What's your ideal scenario?</div>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q2" value="analytical">
                            <span>Solving a complex escape room with puzzles</span>
                        </label>
                        <label class="option">
                            <input type="radio" name="q2" value="emotional">
                            <span>A spontaneous road trip with no set destination</span>
                        </label>
                        <label class="option">
                            <input type="radio" name="q2" value="practical">
                            <span>Organizing a group hiking expedition with detailed plans</span>
                        </label>
                    </div>
                </div>

                <!-- Question 3 -->
                <div class="question-container" data-question="3">
                    <div class="slider-label">How often do you check in with your emotions?</div>
                    <div class="slider-container">
                        <input type="range" min="1" max="10" value="5" class="slider" id="emotionalAwareness">
                        <div class="slider-labels">
                            <span>Only when something's wrong</span>
                            <span>Daily meditation</span>
                            <span>Constantly throughout the day</span>
                        </div>
                    </div>
                </div>

                <!-- Question 4 -->
                <div class="question-container" data-question="4">
                    <div class="question">You're given a mysterious box with no instructions. What do you do?</div>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q4" value="creative">
                            <span>Imagine all the magical things it could contain</span>
                        </label>
                        <label class="option">
                            <input type="radio" name="q4" value="systematic">
                            <span>Examine it carefully for clues and mechanisms</span>
                        </label>
                        <label class="option">
                            <input type="radio" name="q4" value="collaborative">
                            <span>Gather friends to solve the mystery together</span>
                        </label>
                    </div>
                </div>

                <!-- Question 5 -->
                <div class="question-container" data-question="5">
                    <div class="question">What's your perfect way to recharge after a long week?</div>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q5" value="solitude">
                            <span>A quiet evening with a book and hot beverage</span>
                        </label>
                        <label class="option">
                            <input type="radio" name="q5" value="social">
                            <span>A lively dinner party with close friends</span>
                        </label>
                        <label class="option">
                            <input type="radio" name="q5" value="activity">
                            <span>An outdoor adventure or creative project</span>
                        </label>
                    </div>
                </div>

                <!-- Question 6 -->
                <div class="question-container" data-question="6">
                    <div class="slider-label">How do you react when someone gives you unexpected feedback?</div>
                    <div class="slider-container">
                        <input type="range" min="1" max="10" value="5" class="slider" id="criticismHandling">
                        <div class="slider-labels">
                            <span>Feel defensive and upset</span>
                            <span>Need time to process</span>
                            <span>Immediately curious and grateful</span>
                        </div>
                    </div>
                </div>

                <!-- Question 7 -->
                <div class="question-container" data-question="7">
                    <div class="question">You find a magic lamp with a genie. What's your first wish?</div>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q7" value="achievement">
                            <span>Success and recognition in your career</span>
                        </label>
                        <label class="option">
                            <input type="radio" name="q7" value="relationships">
                            <span>Deep, meaningful connections with others</span>
                        </label>
                        <label class="option">
                            <input type="radio" name="q7" value="growth">
                            <span>Wisdom and continuous personal growth</span>
                        </label>
                    </div>
                </div>

                <!-- Question 8 -->
                <div class="question-container" data-question="8">
                    <div class="question">You're lost in a foreign city. How do you find your way?</div>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q8" value="intuitive">
                            <span>Follow your gut feeling and explore</span>
                        </label>
                        <label class="option">
                            <input type="radio" name="q8" value="analytical">
                            <span>Study maps and plan the most efficient route</span>
                        </label>
                        <label class="option">
                            <input type="radio" name="q8" value="collaborative">
                            <span>Ask locals for recommendations</span>
                        </label>
                    </div>
                </div>

                <!-- Question 9 -->
                <div class="question-container" data-question="9">
                    <div class="slider-label">How do you feel when plans change unexpectedly?</div>
                    <div class="slider-container">
                        <input type="range" min="1" max="10" value="5" class="slider" id="adaptability">
                        <div class="slider-labels">
                            <span>Anxious and frustrated</span>
                            <span>Slightly annoyed but adaptable</span>
                            <span>Excited for new possibilities</span>
                        </div>
                    </div>
                </div>

                <!-- Question 10 -->
                <div class="question-container" data-question="10">
                    <div class="question">If you could time travel, which era would you visit?</div>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q10" value="adventure">
                            <span>The future to see technological advancements</span>
                        </label>
                        <label class="option">
                            <input type="radio" name="q10" value="relaxation">
                            <span>A peaceful ancient civilization</span>
                        </label>
                        <label class="option">
                            <input type="radio" name="q10" value="cultural">
                            <span>The Renaissance to experience art and innovation</span>
                        </label>
                    </div>
                </div>
            </div>

            <div class="btn-container">
                <button class="btn" id="prevBtn" disabled>Previous</button>
                <button class="btn" id="nextBtn">Next</button>
            </div>
        </div>

        <div class="results-container" id="resultsContainer">
            <div class="result-card">
                <h3 class="result-title">Your 3D Personality Analysis</h3>
                <div class="score-container">
                    <div class="score-item">
                        <div class="score-value" id="mqScore">0</div>
                        <div class="score-label">Mental Quotient</div>
                    </div>
                    <div class="score-item">
                        <div class="score-value" id="eqScore">0</div>
                        <div class="score-label">Emotional Quotient</div>
                    </div>
                </div>
                <p class="result-description" id="resultDescription"></p>
                <div class="personality-traits" id="personalityTraits"></div>
                <div class="redirect-notice" id="redirectNotice"
                     style="margin-top: 30px; text-align: center; font-size: 1.1rem; color: rgba(255, 255, 255, 0.8);">
                    Redirecting to your dashboard in <span id="countdown">30</span> seconds...
                </div>
            </div>
            <div class="btn-container">
                <button class="btn" id="restartBtn">Take Assessment Again</button>
                <button class="btn" id="skipBtn" style="background: linear-gradient(135deg, #fed6e3, #a8edea);">Go to
                    Dashboard Now
                </button>
            </div>
        </div>

        <div class="footer">
            <p>Aegis - Bridging AI Empathy with Human Connection</p>
            <p>Â© 2023 Team Aegis | Guru Nanak Dev University</p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Create stars
            const starsContainer = document.getElementById('stars');
            for (let i = 0; i < 100; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = `${Math.random() * 100}%`;
                star.style.top = `${Math.random() * 100}%`;
                star.style.animationDelay = `${Math.random() * 3}s`;
                starsContainer.appendChild(star);
            }

            // Assessment functionality
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const restartBtn = document.getElementById('restartBtn');
            const progress = document.getElementById('progress');
            const progressText = document.getElementById('progressText');
            const assessmentContent = document.getElementById('assessmentContent');
            const resultsContainer = document.getElementById('resultsContainer');
            const assessmentContainer = document.querySelector('.assessment-container');
            
            let currentQuestion = 1;
            const totalQuestions = 10;
            
            // Add selection effect to options
            const options = document.querySelectorAll('.option');
            options.forEach(option => {
                option.addEventListener('click', function() {
                    const radioInput = this.querySelector('input[type="radio"]');
                    radioInput.checked = true;
                    
                    // Remove selected class from siblings
                    const siblings = Array.from(this.parentNode.children);
                    siblings.forEach(sibling => {
                        if (sibling !== this) {
                            sibling.classList.remove('selected');
                        }
                    });
                    
                    // Add selected class to clicked option
                    this.classList.add('selected');
                });
            });
            
            // Update progress bar
            function updateProgress() {
                const progressPercent = (currentQuestion / totalQuestions) * 100;
                progress.style.width = `${progressPercent}%`;
                progressText.textContent = `Question ${currentQuestion} of ${totalQuestions}`;
            }
            
            // Show specific question
            function showQuestion(questionNumber) {
                const questionContainers = document.querySelectorAll('.question-container');
                questionContainers.forEach(container => {
                    container.classList.remove('active');
                });
                
                const targetQuestion = document.querySelector(`.question-container[data-question="${questionNumber}"]`);
                if (targetQuestion) {
                    targetQuestion.classList.add('active');
                }
                
                // Update button states
                prevBtn.disabled = questionNumber === 1;
                nextBtn.textContent = questionNumber === totalQuestions ? 'Analyze My Personality' : 'Next';
                
                updateProgress();
            }
            
            // Next button click
            nextBtn.addEventListener('click', function() {
                if (currentQuestion < totalQuestions) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                } else {
                    // Calculate and show results
                    calculateResults();
                }
            });
            
            // Previous button click
            prevBtn.addEventListener('click', function() {
                if (currentQuestion > 1) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            });
            
            // Calculate results
            function calculateResults() {
                // Calculate scores based on answers
                let mqScore = 0;
                let eqScore = 0;
                const traits = [];
                
                // Question 1: Superhero power
                const q1 = document.querySelector('input[name="q1"]:checked');
                if (q1) {
                    if (q1.value === 'introvert') {
                        mqScore += 8;
                        eqScore += 6;
                        traits.push('Insightful', 'Observant');
                    } else if (q1.value === 'extrovert') {
                        mqScore += 6;
                        eqScore += 8;
                        traits.push('Charismatic', 'Inspiring');
                    } else {
                        mqScore += 7;
                        eqScore += 7;
                        traits.push('Adaptable', 'Versatile');
                    }
                }
                
                // Question 2: Adventure weekend
                const q2 = document.querySelector('input[name="q2"]:checked');
                if (q2) {
                    if (q2.value === 'analytical') {
                        mqScore += 9;
                        eqScore += 5;
                        traits.push('Logical', 'Problem-solver');
                    } else if (q2.value === 'emotional') {
                        mqScore += 5;
                        eqScore += 9;
                        traits.push('Spontaneous', 'Free-spirited');
                    } else {
                        mqScore += 7;
                        eqScore += 7;
                        traits.push('Organized', 'Practical');
                    }
                }
                
                // Question 3: Emotional awareness
                const emotionalAwareness = document.getElementById('emotionalAwareness').value;
                eqScore += parseInt(emotionalAwareness);
                if (emotionalAwareness >= 8) {
                    traits.push('Self-aware', 'Mindful');
                } else if (emotionalAwareness >= 5) {
                    traits.push('Reflective');
                }
                
                // Question 4: Mysterious box
                const q4 = document.querySelector('input[name="q4"]:checked');
                if (q4) {
                    if (q4.value === 'creative') {
                        mqScore += 8;
                        eqScore += 6;
                        traits.push('Imaginative', 'Creative');
                    } else if (q4.value === 'systematic') {
                        mqScore += 9;
                        eqScore += 5;
                        traits.push('Methodical', 'Detail-oriented');
                    } else {
                        mqScore += 7;
                        eqScore += 8;
                        traits.push('Collaborative', 'Team-player');
                    }
                }
                
                // Question 5: Recharging
                const q5 = document.querySelector('input[name="q5"]:checked');
                if (q5) {
                    if (q5.value === 'solitude') {
                        mqScore += 8;
                        eqScore += 7;
                        traits.push('Introspective', 'Calm');
                    } else if (q5.value === 'social') {
                        mqScore += 6;
                        eqScore += 8;
                        traits.push('Sociable', 'People-oriented');
                    } else {
                        mqScore += 7;
                        eqScore += 7;
                        traits.push('Active', 'Dynamic');
                    }
                }
                
                // Question 6: Criticism handling
                const criticismHandling = document.getElementById('criticismHandling').value;
                eqScore += parseInt(criticismHandling);
                if (criticismHandling >= 8) {
                    traits.push('Resilient', 'Open-minded');
                } else if (criticismHandling >= 5) {
                    traits.push('Receptive');
                }
                
                // Question 7: Genie wish
                const q7 = document.querySelector('input[name="q7"]:checked');
                if (q7) {
                    if (q7.value === 'achievement') {
                        mqScore += 8;
                        eqScore += 6;
                        traits.push('Ambitious', 'Goal-oriented');
                    } else if (q7.value === 'relationships') {
                        mqScore += 6;
                        eqScore += 9;
                        traits.push('Compassionate', 'Relationship-focused');
                    } else {
                        mqScore += 8;
                        eqScore += 7;
                        traits.push('Curious', 'Growth-minded');
                    }
                }
                
                // Question 8: Lost in city
                const q8 = document.querySelector('input[name="q8"]:checked');
                if (q8) {
                    if (q8.value === 'intuitive') {
                        mqScore += 6;
                        eqScore += 8;
                        traits.push('Intuitive', 'Instinctive');
                    } else if (q8.value === 'analytical') {
                        mqScore += 9;
                        eqScore += 6;
                        traits.push('Analytical', 'Strategic');
                    } else {
                        mqScore += 7;
                        eqScore += 8;
                        traits.push('Consultative', 'People-smart');
                    }
                }
                
                // Question 9: Adaptability
                const adaptability = document.getElementById('adaptability').value;
                mqScore += parseInt(adaptability);
                eqScore += parseInt(adaptability);
                if (adaptability >= 8) {
                    traits.push('Adaptable', 'Flexible');
                } else if (adaptability >= 5) {
                    traits.push('Resilient');
                }
                
                // Question 10: Time travel
                const q10 = document.querySelector('input[name="q10"]:checked');
                if (q10) {
                    if (q10.value === 'adventure') {
                        mqScore += 7;
                        eqScore += 7;
                        traits.push('Forward-thinking', 'Innovative');
                    } else if (q10.value === 'relaxation') {
                        mqScore += 6;
                        eqScore += 8;
                        traits.push('Peaceful', 'Nature-loving');
                    } else {
                        mqScore += 8;
                        eqScore += 7;
                        traits.push('Cultured', 'Curious');
                    }
                }
                
                // Normalize scores to 0-100 scale
                mqScore = Math.min(100, Math.round(mqScore * 1.2));
                eqScore = Math.min(100, Math.round(eqScore * 1.2));
                
                // Generate description based on scores
                let description = "";
                if (mqScore >= 80 && eqScore >= 80) {
                    description = "Wow! You possess an exceptional balance of mental and emotional intelligence. You navigate life's challenges with both analytical precision and emotional depth. Your ability to understand complex situations while maintaining empathy makes you a rare and valuable individual. People are drawn to your wisdom and compassion.";
                } else if (mqScore >= 80) {
                    description = "Your mental intelligence is truly impressive! You excel at logical thinking, problem-solving, and strategic planning. Your analytical mind allows you to break down complex issues and find effective solutions. Consider further developing your emotional intelligence to enhance your interpersonal relationships and communication skills even more.";
                } else if (eqScore >= 80) {
                    description = "Your emotional intelligence shines brightly! You have a remarkable ability to understand and manage emotions, both yours and others'. Your empathy and self-awareness make you an excellent friend and team member. Consider further developing your analytical skills to complement your emotional strengths and create an even more balanced approach to life's challenges.";
                } else {
                    description = "You have a well-rounded personality with balanced mental and emotional intelligence. You possess a unique blend of analytical thinking and emotional awareness that serves you well in various situations. Continue nurturing both aspects of your intelligence to unlock your full potential and become even more effective in navigating life's complexities.";
                }
                
                // Display results
                document.getElementById('mqScore').textContent = mqScore;
                document.getElementById('eqScore').textContent = eqScore;
                document.getElementById('resultDescription').textContent = description;
                
                // Display personality traits
                const personalityTraitsEl = document.getElementById('personalityTraits');
                personalityTraitsEl.innerHTML = '';
                const uniqueTraits = [...new Set(traits)];
                uniqueTraits.forEach(trait => {
                    const traitEl = document.createElement('div');
                    traitEl.className = 'trait';
                    traitEl.textContent = trait;
                    personalityTraitsEl.appendChild(traitEl);
                });
                
                // Create confetti effect
                createConfetti();
                
                // Hide assessment and show results
                assessmentContainer.style.display = 'none';
                resultsContainer.style.display = 'block';

                let countdown = 30;
                document.getElementById('countdown').textContent = countdown;

                const intervalId = setInterval(() => {
                    countdown--;
                    document.getElementById('countdown').textContent = countdown;
                    if (countdown === 0) {
                        clearInterval(intervalId);
                        window.location.href = "/pages/userdashboard.html";
                    }
                }, 1000);

                document.getElementById('skipBtn').addEventListener('click', function () {
                    clearInterval(intervalId);
                    window.location.href = "/pages/userdashboard.html";
                });
            }
            
            // Create confetti effect
            function createConfetti() {
                const colors = ['#a8edea', '#fed6e3', '#d299c2', '#fef9d7', '#edf2f7'];
                
                for (let i = 0; i < 100; i++) {
                    setTimeout(() => {
                        const confetti = document.createElement('div');
                        confetti.className = 'confetti';
                        confetti.style.left = `${Math.random() * 100}%`;
                        confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                        confetti.style.width = `${Math.random() * 10 + 5}px`;
                        confetti.style.height = confetti.style.width;
                        confetti.style.opacity = Math.random();
                        document.body.appendChild(confetti);
                        
                        setTimeout(() => {
                            confetti.remove();
                        }, 3000);
                    }, i * 30);
                }
            }
            
            // Restart assessment
            restartBtn.addEventListener('click', function() {
                currentQuestion = 1;
                showQuestion(currentQuestion);
                
                // Reset all selections
                document.querySelectorAll('input[type="radio"]').forEach(radio => {
                    radio.checked = false;
                });
                document.querySelectorAll('.option').forEach(option => {
                    option.classList.remove('selected');
                });
                document.querySelectorAll('.slider').forEach(slider => {
                    slider.value = 5;
                });
                
                // Show assessment and hide results
                assessmentContainer.style.display = 'block';
                resultsContainer.style.display = 'none';
            });
            
            // Initialize
            showQuestion(currentQuestion);
        });
    </script>
</body>
</html>