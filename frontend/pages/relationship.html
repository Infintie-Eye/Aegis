<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Relationship Issues Community - Aegis</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary-color: #9370db;
            --secondary-color: #87ceeb;
            --accent-color: #b19cd9;
            --light-color: #e6e6fa;
            --dark-color: #4b0082;
            --text-color: #333;
            --card-bg: rgba(255, 255, 255, 0.85);
            --transition: all 0.4s ease;
            --chat-bg: rgba(255, 255, 255, 0.7);
        }

        body {
            background: linear-gradient(135deg, #d4fc79, #96e6a1, #a1c4fd, #c2e9fb);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            color: var(--text-color);
            overflow-x: hidden;
            min-height: 100vh;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* Vertical Navigation Bar */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            width: 80px;
            height: 100vh;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            box-shadow: 2px 0 15px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            align-items: center;
            padding-top: 30px;
            z-index: 1000;
            transition: var(--transition);
        }

        .navbar:hover {
            width: 100px;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 25px 0;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
        }

        .nav-item i {
            font-size: 24px;
            color: var(--primary-color);
            margin-bottom: 8px;
            transition: var(--transition);
        }

        .nav-item span {
            font-size: 12px;
            color: var(--dark-color);
            opacity: 0;
            transition: var(--transition);
        }

        .navbar:hover .nav-item span {
            opacity: 1;
        }

        .nav-item:hover i {
            color: var(--accent-color);
            transform: scale(1.2);
        }

        .nav-item.active::after {
            content: '';
            position: absolute;
            right: -20px;
            top: 50%;
            transform: translateY(-50%);
            width: 5px;
            height: 40px;
            background: var(--accent-color);
            border-radius: 5px;
        }

        /* Main Content */
        .main-content {
            margin-left: 80px;
            padding: 40px;
            min-height: 100vh;
            transition: var(--transition);
            display: flex;
            flex-direction: column;
        }

        .navbar:hover ~ .main-content {
            margin-left: 100px;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 30px;
            position: relative;
        }

        .header h1 {
            font-size: 3rem;
            color: var(--dark-color);
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            animation: fadeInDown 1s ease;
        }

        .header p {
            font-size: 1.1rem;
            color: var(--dark-color);
            max-width: 700px;
            margin: 0 auto;
            animation: fadeInUp 1s ease;
        }

        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* 3D Graphic Element */
        .floating-element {
            position: absolute;
            top: 50px;
            right: 100px;
            width: 200px;
            height: 200px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: 50%;
            box-shadow: 0 10px 30px rgba(106, 90, 205, 0.3);
            transform-style: preserve-3d;
            animation: float 6s ease-in-out infinite;
            z-index: -1;
        }

        .floating-element::before {
            content: '';
            position: absolute;
            top: -20px;
            left: -20px;
            right: -20px;
            bottom: -20px;
            background: linear-gradient(135deg, var(--accent-color), var(--light-color));
            border-radius: 50%;
            z-index: -1;
            filter: blur(20px);
            opacity: 0.7;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotateX(0) rotateY(0); }
            50% { transform: translateY(-20px) rotateX(10deg) rotateY(10deg); }
        }

        /* Chat Container */
        .chat-container {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            background: var(--chat-bg);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            position: relative;
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
            perspective: 1000px;
        }

        .chat-header {
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            color: white;
            padding: 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            position: relative;
            z-index: 10;
        }

        .chat-header h2 {
            font-size: 1.5rem;
            display: flex;
            align-items: center;
        }

        .chat-header h2 i {
            margin-right: 10px;
        }

        .online-count {
            display: flex;
            align-items: center;
            background: rgba(255, 255, 255, 0.2);
            padding: 5px 15px;
            border-radius: 20px;
        }

        .online-count .status-dot {
            width: 10px;
            height: 10px;
            background: #4ade80;
            border-radius: 50%;
            margin-right: 8px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(74, 222, 128, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(74, 222, 128, 0); }
            100% { box-shadow: 0 0 0 0 rgba(74, 222, 128, 0); }
        }

        /* Chat Messages */
        .chat-messages {
            flex-grow: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 15px;
            position: relative;
        }

        .message {
            display: flex;
            margin-bottom: 15px;
            animation: fadeIn 0.5s ease;
            transform-style: preserve-3d;
            transition: transform 0.3s ease;
        }

        .message:hover {
            transform: translateZ(10px);
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .message-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            margin-right: 15px;
            flex-shrink: 0;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .message-content {
            background: white;
            padding: 15px;
            border-radius: 15px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
            max-width: 70%;
            position: relative;
        }

        .message-username {
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 5px;
        }

        .message-text {
            color: var(--text-color);
            line-height: 1.5;
        }

        .message-time {
            font-size: 0.75rem;
            color: #888;
            margin-top: 5px;
            text-align: right;
        }

        .message.own {
            align-self: flex-end;
            flex-direction: row-reverse;
        }

        .message.own .message-content {
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            color: white;
        }

        .message.own .message-username {
            color: white;
        }

        .message.own .message-text {
            color: white;
        }

        .message.own .message-time {
            color: rgba(255, 255, 255, 0.7);
        }

        /* Chat Input */
        .chat-input-container {
            padding: 20px;
            background: rgba(255, 255, 255, 0.8);
            border-top: 1px solid rgba(0, 0, 0, 0.05);
            display: flex;
            align-items: center;
            position: relative;
        }

        .chat-input {
            flex-grow: 1;
            padding: 15px 20px;
            border: none;
            border-radius: 30px;
            background: white;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            font-size: 1rem;
            outline: none;
            transition: var(--transition);
        }

        .chat-input:focus {
            box-shadow: 0 4px 20px rgba(147, 112, 219, 0.2);
        }

        .send-button {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            color: white;
            border: none;
            margin-left: 15px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            transition: var(--transition);
            box-shadow: 0 4px 15px rgba(147, 112, 219, 0.3);
        }

        .send-button:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(147, 112, 219, 0.4);
        }

        .send-button:active {
            transform: scale(0.95);
        }

        /* 3D Elements */
        .chat-3d-element {
            position: absolute;
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(147, 112, 219, 0.3);
            transform-style: preserve-3d;
            animation: float3d 8s ease-in-out infinite;
            z-index: -1;
            opacity: 0.7;
        }

        .chat-3d-element.top-right {
            top: 20px;
            right: 20px;
            animation-delay: 0.5s;
        }

        .chat-3d-element.bottom-left {
            bottom: 20px;
            left: 20px;
            animation-delay: 1s;
        }

        @keyframes float3d {
            0%, 100% { transform: translateY(0) rotateX(0) rotateY(0); }
            25% { transform: translateY(-15px) rotateX(5deg) rotateY(5deg); }
            50% { transform: translateY(0) rotateX(0) rotateY(10deg); }
            75% { transform: translateY(15px) rotateX(-5deg) rotateY(-5deg); }
        }

        /* Community Guidelines */
        .guidelines {
            background: rgba(255, 255, 255, 0.8);
            border-radius: 15px;
            padding: 20px;
            margin-top: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
        }

        .guidelines h3 {
            color: var(--dark-color);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }

        .guidelines h3 i {
            margin-right: 10px;
            color: var(--primary-color);
        }

        .guidelines-list {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
        }

        .guideline-item {
            flex: 1 1 300px;
            display: flex;
            align-items: flex-start;
        }

        .guideline-item i {
            color: var(--accent-color);
            margin-right: 10px;
            margin-top: 3px;
        }

        /* Responsive Design */
        @media (max-width: 992px) {
            .navbar {
                width: 70px;
            }
            
            .navbar:hover {
                width: 90px;
            }
            
            .main-content {
                margin-left: 70px;
            }
            
            .navbar:hover ~ .main-content {
                margin-left: 90px;
            }
            
            .header h1 {
                font-size: 2.5rem;
            }
            
            .floating-element {
                width: 150px;
                height: 150px;
                right: 50px;
            }
        }

        @media (max-width: 768px) {
            .navbar {
                width: 60px;
                flex-direction: row;
                height: 70px;
                width: 100%;
                top: auto;
                bottom: 0;
                left: 0;
                right: 0;
                padding-top: 0;
                justify-content: space-around;
            }
            
            .navbar:hover {
                width: 100%;
            }
            
            .nav-item {
                flex-direction: row;
                margin: 0;
            }
            
            .nav-item i {
                margin-bottom: 0;
                margin-right: 5px;
            }
            
            .nav-item span {
                display: none;
            }
            
            .main-content {
                margin-left: 0;
                margin-bottom: 80px;
                padding: 20px;
            }
            
            .navbar:hover ~ .main-content {
                margin-left: 0;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .floating-element {
                display: none;
            }
            
            .message-content {
                max-width: 85%;
            }
            
            .chat-3d-element {
                display: none;
            }
        }

        /* Interactive Elements */
        .interactive-element {
            position: fixed;
            border-radius: 50%;
            pointer-events: none;
            z-index: 1;
            opacity: 0.5;
            background: radial-gradient(circle, var(--primary-color), transparent);
        }

        /* Notification Badge */
        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #ff4757;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            font-weight: bold;
        }
    </style>
    <script type="module" src="../js/authguard.js"></script>
</head>
<body>
    <!-- Vertical Navigation Bar -->
    <nav class="navbar">
        <div class="nav-item">
            <i class="fas fa-home"></i>
            <span>Home</span>
        </div>
        <div class="nav-item">
            <i class="fas fa-robot"></i>
            <span>AI Companion</span>
        </div>
        <div class="nav-item active">
            <i class="fas fa-users"></i>
            <span>Community</span>
            <div class="notification-badge">3</div>
        </div>
        <div class="nav-item">
            <i class="fas fa-user"></i>
            <span>Profile</span>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- 3D Graphic Element -->
        <div class="floating-element"></div>

        <!-- Header -->
        <header class="header">
            <h1>Relationship Issues Community</h1>
            <p>A safe space to share, connect, and find support for relationship challenges. All conversations are anonymous.</p>
        </header>

        <!-- Chat Container -->
        <div class="chat-container">
            <!-- 3D Elements -->
            <div class="chat-3d-element top-right"></div>
            <div class="chat-3d-element bottom-left"></div>
            
            <!-- Chat Header -->
            <div class="chat-header">
                <h2><i class="fas fa-hands-helping"></i> Relationship Issues Sanctuary</h2>
                <div class="online-count">
                    <div class="status-dot"></div>
                    <span>31 Online</span>
                </div>
            </div>
            
            <!-- Chat Messages -->
            <div class="chat-messages" id="chatMessages">
                <!-- Sample messages -->
                <div class="message">
                    <div class="message-avatar">JD</div>
                    <div class="message-content">
                        <div class="message-username">JadedDreamer</div>
                        <div class="message-text">Hi everyone. I've been struggling with communication issues in my relationship lately. It feels like we're talking past each other.</div>
                        <div class="message-time">10:15 AM</div>
                    </div>
                </div>
                
                <div class="message">
                    <div class="message-avatar">SC</div>
                    <div class="message-content">
                        <div class="message-username">SerenitySeeker</div>
                        <div class="message-text">I understand that feeling, JadedDreamer. Have you tried setting aside specific time to talk without distractions?</div>
                        <div class="message-time">10:17 AM</div>
                    </div>
                </div>
                
                <div class="message own">
                    <div class="message-avatar">ME</div>
                    <div class="message-content">
                        <div class="message-username">Me</div>
                        <div class="message-text">That's a great suggestion. I've found that using "I feel" statements instead of "you always" helps prevent defensive reactions.</div>
                        <div class="message-time">10:20 AM</div>
                    </div>
                </div>
                
                <div class="message">
                    <div class="message-avatar">BW</div>
                    <div class="message-content">
                        <div class="message-username">BlueWaves</div>
                        <div class="message-text">I'm dealing with trust issues after being hurt in a previous relationship. How do you move past that fear?</div>
                        <div class="message-time">10:22 AM</div>
                    </div>
                </div>
                
                <div class="message">
                    <div class="message-avatar">QH</div>
                    <div class="message-content">
                        <div class="message-username">QuietHeart</div>
                        <div class="message-text">BlueWaves, that's really tough. It takes time and consistent positive experiences to rebuild trust. Be patient with yourself.</div>
                        <div class="message-time">10:25 AM</div>
                    </div>
                </div>
            </div>
            
            <!-- Chat Input -->
            <div class="chat-input-container">
                <input type="text" class="chat-input" id="messageInput" placeholder="Share your thoughts anonymously...">
                <button class="send-button" id="sendButton">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
        
        <!-- Community Guidelines -->
        <div class="guidelines">
            <h3><i class="fas fa-shield-alt"></i> Community Guidelines</h3>
            <div class="guidelines-list">
                <div class="guideline-item">
                    <i class="fas fa-user-secret"></i>
                    <span>Remain anonymous to protect your privacy</span>
                </div>
                <div class="guideline-item">
                    <i class="fas fa-heart"></i>
                    <span>Be respectful and supportive to all members</span>
                </div>
                <div class="guideline-item">
                    <i class="fas fa-comments"></i>
                    <span>Share experiences, not professional advice</span>
                </div>
                <div class="guideline-item">
                    <i class="fas fa-lock"></i>
                    <span>Keep conversations confidential</span>
                </div>
            </div>
        </div>
    </main>

    <script>
        // Interactive Elements
        document.addEventListener('DOMContentLoaded', function() {
            // Create interactive elements that follow the cursor
            const body = document.body;
            
            document.addEventListener('mousemove', function(e) {
                if (Math.random() > 0.95) {
                    createInteractiveElement(e.clientX, e.clientY);
                }
            });
            
            function createInteractiveElement(x, y) {
                const element = document.createElement('div');
                element.classList.add('interactive-element');
                
                const size = Math.random() * 20 + 5;
                element.style.width = `${size}px`;
                element.style.height = `${size}px`;
                element.style.left = `${x - size/2}px`;
                element.style.top = `${y - size/2}px`;
                
                body.appendChild(element);
                
                // Animate the element
                setTimeout(() => {
                    element.style.transform = `scale(${Math.random() * 5 + 2})`;
                    element.style.opacity = '0';
                }, 10);
                
                // Remove the element after animation
                setTimeout(() => {
                    element.remove();
                }, 1000);
            }
            
            // Navbar interaction
            const navItems = document.querySelectorAll('.nav-item');
            
            navItems.forEach(item => {
                item.addEventListener('click', function() {
                    // Remove active class from all items
                    navItems.forEach(navItem => {
                        navItem.classList.remove('active');
                    });
                    
                    // Add active class to clicked item
                    this.classList.add('active');
                    
                    // Get the navigation text
                    const navText = this.querySelector('span').textContent;
                    console.log(`Navigating to ${navText}`);
                    // Here you would typically handle navigation
                });
            });
            
            // Chat functionality
            const messageInput = document.getElementById('messageInput');
            const sendButton = document.getElementById('sendButton');
            const chatMessages = document.getElementById('chatMessages');
            
            // Function to add a message to the chat
            function addMessage(text, isOwn = true) {
                const messageDiv = document.createElement('div');
                messageDiv.classList.add('message');
                
                if (isOwn) {
                    messageDiv.classList.add('own');
                }
                
                // Generate random initials for avatar
                const initials = isOwn ? 'ME' : generateRandomInitials();
                const username = isOwn ? 'Me' : generateRandomUsername();
                
                // Get current time
                const now = new Date();
                const timeString = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                
                messageDiv.innerHTML = `
                    <div class="message-avatar">${initials}</div>
                    <div class="message-content">
                        <div class="message-username">${username}</div>
                        <div class="message-text">${text}</div>
                        <div class="message-time">${timeString}</div>
                    </div>
                `;
                
                chatMessages.appendChild(messageDiv);
                
                // Scroll to bottom
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }
            
            // Function to generate random initials
            function generateRandomInitials() {
                const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
                const firstInitial = letters.charAt(Math.floor(Math.random() * letters.length));
                const secondInitial = letters.charAt(Math.floor(Math.random() * letters.length));
                return firstInitial + secondInitial;
            }
            
            // Function to generate random username
            function generateRandomUsername() {
                const adjectives = ['Jaded', 'Serenity', 'Blue', 'Quiet', 'Gentle', 'Hopeful', 'Brave', 'Calm', 'Peaceful', 'Kind'];
                const nouns = ['Dreamer', 'Seeker', 'Waves', 'Heart', 'Soul', 'Spirit', 'Mind', 'Voice', 'Light', 'Star'];
                
                const adjective = adjectives[Math.floor(Math.random() * adjectives.length)];
                const noun = nouns[Math.floor(Math.random() * nouns.length)];
                
                return adjective + noun;
            }
            
            // Function to simulate receiving a message
            function simulateIncomingMessage() {
                const responses = [
                    "That sounds really difficult. I'm here for you.",
                    "I've experienced something similar. It helps to talk about it.",
                    "Thank you for sharing that. You're not alone.",
                    "Have you tried talking to a professional about this?",
                    "It's brave of you to open up about this.",
                    "Small steps can lead to big changes. Be patient with yourself.",
                    "Remember to take care of yourself first. You matter.",
                    "It's okay to set boundaries in relationships.",
                    "Communication is key. Have you tried expressing how you feel?",
                    "Your feelings are valid. Don't let anyone tell you otherwise."
                ];
                
                const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                
                setTimeout(() => {
                    addMessage(randomResponse, false);
                }, 2000 + Math.random() * 3000); // Random delay between 2-5 seconds
            }
            
            // Event listener for send button
            sendButton.addEventListener('click', function() {
                const messageText = messageInput.value.trim();
                
                if (messageText) {
                    addMessage(messageText, true);
                    messageInput.value = '';
                    
                    // Simulate a response
                    simulateIncomingMessage();
                }
            });
            
            // Event listener for Enter key in input
            messageInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendButton.click();
                }
            });
            
            // Simulate initial activity
            setTimeout(() => {
                addMessage("Welcome to the Relationship Issues community. Feel free to share what's on your mind.", false);
            }, 1000);
        });
    </script>
</body>
</html>