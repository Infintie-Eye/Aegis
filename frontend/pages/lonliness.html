<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loneliness Sanctuary - Aegis Community</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary-color: #6a5acd;
            --secondary-color: #87ceeb;
            --accent-color: #9370db;
            --light-color: #e6e6fa;
            --dark-color: #4b0082;
            --text-color: #333;
            --card-bg: rgba(255, 255, 255, 0.85);
            --message-bg: rgba(255, 255, 255, 0.9);
            --transition: all 0.4s ease;
        }

        body {
            background: linear-gradient(135deg, #a1c4fd, #c2e9fb, #d4fc79, #96e6a1);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            color: var(--text-color);
            overflow-x: hidden;
            min-height: 100vh;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* Vertical Navigation Bar */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            width: 80px;
            height: 100vh;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            box-shadow: 2px 0 15px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            align-items: center;
            padding-top: 30px;
            z-index: 1000;
            transition: var(--transition);
        }

        .navbar:hover {
            width: 100px;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 25px 0;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
        }

        .nav-item i {
            font-size: 24px;
            color: var(--primary-color);
            margin-bottom: 8px;
            transition: var(--transition);
        }

        .nav-item span {
            font-size: 12px;
            color: var(--dark-color);
            opacity: 0;
            transition: var(--transition);
        }

        .navbar:hover .nav-item span {
            opacity: 1;
        }

        .nav-item:hover i {
            color: var(--accent-color);
            transform: scale(1.2);
        }

        .nav-item.active::after {
            content: '';
            position: absolute;
            right: -20px;
            top: 50%;
            transform: translateY(-50%);
            width: 5px;
            height: 40px;
            background: var(--accent-color);
            border-radius: 5px;
        }

        /* Main Content */
        .main-content {
            margin-left: 80px;
            padding: 40px;
            min-height: 100vh;
            transition: var(--transition);
            display: flex;
            flex-direction: column;
        }

        .navbar:hover ~ .main-content {
            margin-left: 100px;
        }

        /* Community Header */
        .community-header {
            text-align: center;
            margin-bottom: 30px;
            position: relative;
        }

        .community-header h1 {
            font-size: 2.5rem;
            color: var(--dark-color);
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .community-header p {
            font-size: 1.1rem;
            color: var(--dark-color);
            max-width: 700px;
            margin: 0 auto;
        }

        /* 3D Graphic Element */
        .floating-element {
            position: absolute;
            top: 30px;
            right: 50px;
            width: 150px;
            height: 150px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: 50%;
            box-shadow: 0 10px 30px rgba(106, 90, 205, 0.3);
            transform-style: preserve-3d;
            animation: float 6s ease-in-out infinite;
            z-index: -1;
        }

        .floating-element::before {
            content: '';
            position: absolute;
            top: -20px;
            left: -20px;
            right: -20px;
            bottom: -20px;
            background: linear-gradient(135deg, var(--accent-color), var(--light-color));
            border-radius: 50%;
            z-index: -1;
            filter: blur(20px);
            opacity: 0.7;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotateX(0) rotateY(0); }
            50% { transform: translateY(-20px) rotateX(10deg) rotateY(10deg); }
        }

        /* Chat Container */
        .chat-container {
            display: flex;
            flex: 1;
            gap: 20px;
            margin-bottom: 20px;
        }

        /* Chat Area */
        .chat-area {
            flex: 1;
            background: var(--card-bg);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            backdrop-filter: blur(10px);
        }

        .chat-header {
            padding: 20px;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .chat-title {
            font-size: 1.3rem;
            color: var(--dark-color);
            font-weight: 600;
        }

        .chat-status {
            display: flex;
            align-items: center;
            color: #4CAF50;
            font-size: 0.9rem;
        }

        .status-dot {
            width: 10px;
            height: 10px;
            background: #4CAF50;
            border-radius: 50%;
            margin-right: 5px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0.7; }
            100% { transform: scale(1); opacity: 1; }
        }

        /* Messages Area */
        .messages-area {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .message {
            display: flex;
            gap: 15px;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .message-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            flex-shrink: 0;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .message-content {
            flex: 1;
        }

        .message-header {
            display: flex;
            align-items: center;
            margin-bottom: 5px;
        }

        .message-username {
            font-weight: 600;
            color: var(--dark-color);
            margin-right: 10px;
        }

        .message-time {
            font-size: 0.8rem;
            color: #777;
        }

        .message-text {
            background: var(--message-bg);
            padding: 12px 15px;
            border-radius: 18px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            position: relative;
        }

        .message-text::before {
            content: '';
            position: absolute;
            top: 10px;
            left: -8px;
            width: 15px;
            height: 15px;
            background: var(--message-bg);
            transform: rotate(45deg);
            box-shadow: -2px 2px 5px rgba(0, 0, 0, 0.05);
        }

        /* Input Area */
        .input-area {
            padding: 20px;
            border-top: 1px solid rgba(0, 0, 0, 0.05);
            display: flex;
            gap: 10px;
        }

        .message-input {
            flex: 1;
            padding: 12px 20px;
            border: none;
            border-radius: 30px;
            background: rgba(255, 255, 255, 0.8);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            font-size: 1rem;
            outline: none;
            transition: var(--transition);
        }

        .message-input:focus {
            box-shadow: 0 4px 15px rgba(106, 90, 205, 0.2);
        }

        .send-button {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--primary-color);
            color: white;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: 0 4px 10px rgba(106, 90, 205, 0.3);
        }

        .send-button:hover {
            background: var(--accent-color);
            transform: scale(1.05);
        }

        /* Users Sidebar */
        .users-sidebar {
            width: 280px;
            background: var(--card-bg);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            backdrop-filter: blur(10px);
            display: flex;
            flex-direction: column;
        }

        .sidebar-header {
            padding: 20px;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }

        .sidebar-title {
            font-size: 1.2rem;
            color: var(--dark-color);
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .online-count {
            background: #4CAF50;
            color: white;
            border-radius: 20px;
            padding: 2px 10px;
            font-size: 0.8rem;
        }

        .users-list {
            flex: 1;
            overflow-y: auto;
            padding: 15px;
        }

        .user-item {
            display: flex;
            align-items: center;
            padding: 12px;
            border-radius: 12px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: var(--transition);
        }

        .user-item:hover {
            background: rgba(255, 255, 255, 0.5);
            transform: translateX(5px);
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            margin-right: 12px;
            position: relative;
        }

        .user-status {
            position: absolute;
            bottom: 0;
            right: 0;
            width: 12px;
            height: 12px;
            background: #4CAF50;
            border-radius: 50%;
            border: 2px solid white;
        }

        .user-info {
            flex: 1;
        }

        .user-name {
            font-weight: 600;
            color: var(--dark-color);
            margin-bottom: 2px;
        }

        .user-activity {
            font-size: 0.8rem;
            color: #777;
        }

        /* Community Resources */
        .resources-section {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        .resources-title {
            font-size: 1.3rem;
            color: var(--dark-color);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
        }

        .resources-title i {
            margin-right: 10px;
            color: var(--primary-color);
        }

        .resources-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .resource-card {
            background: rgba(255, 255, 255, 0.7);
            border-radius: 15px;
            padding: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            transition: var(--transition);
            cursor: pointer;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .resource-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }

        .resource-icon {
            font-size: 2rem;
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        .resource-title {
            font-weight: 600;
            color: var(--dark-color);
            margin-bottom: 5px;
        }

        .resource-description {
            font-size: 0.9rem;
            color: #666;
        }

        /* 3D Interactive Elements */
        .interactive-element {
            position: fixed;
            border-radius: 50%;
            pointer-events: none;
            z-index: 1;
            opacity: 0.5;
            background: radial-gradient(circle, var(--primary-color), transparent);
        }

        /* Responsive Design */
        @media (max-width: 992px) {
            .navbar {
                width: 70px;
            }
            
            .navbar:hover {
                width: 90px;
            }
            
            .main-content {
                margin-left: 70px;
            }
            
            .navbar:hover ~ .main-content {
                margin-left: 90px;
            }
            
            .users-sidebar {
                width: 240px;
            }
            
            .floating-element {
                width: 120px;
                height: 120px;
            }
        }

        @media (max-width: 768px) {
            .navbar {
                width: 60px;
                flex-direction: row;
                height: 70px;
                width: 100%;
                top: auto;
                bottom: 0;
                left: 0;
                right: 0;
                padding-top: 0;
                justify-content: space-around;
            }
            
            .navbar:hover {
                width: 100%;
            }
            
            .nav-item {
                flex-direction: row;
                margin: 0;
            }
            
            .nav-item i {
                margin-bottom: 0;
                margin-right: 5px;
            }
            
            .nav-item span {
                display: none;
            }
            
            .main-content {
                margin-left: 0;
                margin-bottom: 80px;
                padding: 20px;
            }
            
            .navbar:hover ~ .main-content {
                margin-left: 0;
            }
            
            .chat-container {
                flex-direction: column;
            }
            
            .users-sidebar {
                width: 100%;
                max-height: 200px;
            }
            
            .community-header h1 {
                font-size: 2rem;
            }
            
            .floating-element {
                display: none;
            }
        }
    </style>
    <script type="module" src="../js/authguard.js"></script>
</head>
<body>
    <!-- Vertical Navigation Bar -->
    <nav class="navbar">
        <div class="nav-item">
            <i class="fas fa-home"></i>
            <span>Home</span>
        </div>
        <div class="nav-item">
            <i class="fas fa-robot"></i>
            <span>AI Companion</span>
        </div>
        <div class="nav-item active">
            <i class="fas fa-users"></i>
            <span>Community</span>
        </div>
        <div class="nav-item">
            <i class="fas fa-user"></i>
            <span>Profile</span>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Community Header -->
        <header class="community-header">
            <h1>Loneliness Sanctuary</h1>
            <p>A safe space to connect with others who understand your journey. You are not alone.</p>
            <div class="floating-element"></div>
        </header>

        <!-- Chat Container -->
        <div class="chat-container">
            <!-- Chat Area -->
            <div class="chat-area">
                <div class="chat-header">
                    <div class="chat-title">Community Chat</div>
                    <div class="chat-status">
                        <div class="status-dot"></div>
                        <span>42 members online</span>
                    </div>
                </div>

                <!-- Messages Area -->
                <div class="messages-area" id="messagesArea">
                    <!-- Messages will be dynamically added here -->
                </div>

                <!-- Input Area -->
                <div class="input-area">
                    <input type="text" class="message-input" id="messageInput" placeholder="Type your message here...">
                    <button class="send-button" id="sendButton">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>

            <!-- Users Sidebar -->
            <div class="users-sidebar">
                <div class="sidebar-header">
                    <div class="sidebar-title">
                        <span>Community Members</span>
                        <span class="online-count">42</span>
                    </div>
                </div>
                <div class="users-list" id="usersList">
                    <!-- Users will be dynamically added here -->
                </div>
            </div>
        </div>

        <!-- Community Resources -->
        <div class="resources-section">
            <h3 class="resources-title">
                <i class="fas fa-lightbulb"></i>
                Community Resources
            </h3>
            <div class="resources-grid">
                <div class="resource-card">
                    <div class="resource-icon">
                        <i class="fas fa-comments"></i>
                    </div>
                    <h4 class="resource-title">Daily Prompts</h4>
                    <p class="resource-description">Conversation starters to help connect with others</p>
                </div>
                <div class="resource-card">
                    <div class="resource-icon">
                        <i class="fas fa-book"></i>
                    </div>
                    <h4 class="resource-title">Helpful Articles</h4>
                    <p class="resource-description">Resources on coping with loneliness</p>
                </div>
                <div class="resource-card">
                    <div class="resource-icon">
                        <i class="fas fa-calendar-alt"></i>
                    </div>
                    <h4 class="resource-title">Virtual Events</h4>
                    <p class="resource-description">Join community activities and discussions</p>
                </div>
                <div class="resource-card">
                    <div class="resource-icon">
                        <i class="fas fa-headset"></i>
                    </div>
                    <h4 class="resource-title">Support Groups</h4>
                    <p class="resource-description">Smaller group sessions for deeper connections</p>
                </div>
            </div>
        </div>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Sample user data
            const users = [
                { id: 1, name: 'BlueSky', status: 'Online', activity: 'Just joined' },
                { id: 2, name: 'StarGazer', status: 'Online', activity: 'Active now' },
                { id: 3, name: 'OceanWave', status: 'Online', activity: 'Reading messages' },
                { id: 4, name: 'MountainPeak', status: 'Online', activity: 'Active now' },
                { id: 5, name: 'Sunflower', status: 'Online', activity: 'Typing...' },
                { id: 6, name: 'NightOwl', status: 'Online', activity: 'Active now' },
                { id: 7, name: 'RiverStone', status: 'Online', activity: 'Active now' },
                { id: 8, name: 'ForestPath', status: 'Online', activity: 'Just joined' }
            ];

            // Sample messages
            const initialMessages = [
                { userId: 2, text: 'Hey everyone, hope you\'re all doing okay today.', time: '10:30 AM' },
                { userId: 5, text: 'Just wanted to say this community has been a real help for me. Feeling less alone already.', time: '10:32 AM' },
                { userId: 1, text: 'Same here! It\'s comforting to know others understand what it feels like.', time: '10:35 AM' },
                { userId: 3, text: 'Does anyone want to talk about how they\'re feeling today? I could use a chat.', time: '10:40 AM' },
                { userId: 7, text: 'I\'m feeling a bit down today. The weather isn\'t helping either.', time: '10:42 AM' },
                { userId: 4, text: 'I hear you. Sometimes the smallest things can affect our mood. What usually helps you feel better?', time: '10:45 AM' }
            ];

            // Generate avatar initials
            function getInitials(name) {
                return name.substring(0, 2).toUpperCase();
            }

            // Generate random color for avatar
            function getRandomColor() {
                const colors = [
                    'linear-gradient(135deg, #6a5acd, #87ceeb)',
                    'linear-gradient(135deg, #9370db, #b19cd9)',
                    'linear-gradient(135deg, #4b0082, #6a0dad)',
                    'linear-gradient(135deg, #87ceeb, #b0e0e6)',
                    'linear-gradient(135deg, #e6e6fa, #d8bfd8)',
                    'linear-gradient(135deg, #dda0dd, #da70d6)'
                ];
                return colors[Math.floor(Math.random() * colors.length)];
            }

            // Populate users list
            function populateUsersList() {
                const usersList = document.getElementById('usersList');
                usersList.innerHTML = '';
                
                users.forEach(user => {
                    const userItem = document.createElement('div');
                    userItem.className = 'user-item';
                    userItem.innerHTML = `
                        <div class="user-avatar" style="background: ${getRandomColor()}">
                            ${getInitials(user.name)}
                            <div class="user-status"></div>
                        </div>
                        <div class="user-info">
                            <div class="user-name">${user.name}</div>
                            <div class="user-activity">${user.activity}</div>
                        </div>
                    `;
                    usersList.appendChild(userItem);
                });
            }

            // Populate messages
            function populateMessages() {
                const messagesArea = document.getElementById('messagesArea');
                messagesArea.innerHTML = '';
                
                initialMessages.forEach(message => {
                    const user = users.find(u => u.id === message.userId);
                    if (user) {
                        const messageElement = document.createElement('div');
                        messageElement.className = 'message';
                        messageElement.innerHTML = `
                            <div class="message-avatar" style="background: ${getRandomColor()}">
                                ${getInitials(user.name)}
                            </div>
                            <div class="message-content">
                                <div class="message-header">
                                    <div class="message-username">${user.name}</div>
                                    <div class="message-time">${message.time}</div>
                                </div>
                                <div class="message-text">${message.text}</div>
                            </div>
                        `;
                        messagesArea.appendChild(messageElement);
                    }
                });
                
                // Scroll to bottom
                messagesArea.scrollTop = messagesArea.scrollHeight;
            }

            // Send message function
            function sendMessage() {
                const messageInput = document.getElementById('messageInput');
                const messageText = messageInput.value.trim();
                
                if (messageText) {
                    // Add message to chat
                    const messagesArea = document.getElementById('messagesArea');
                    const messageElement = document.createElement('div');
                    messageElement.className = 'message';
                    messageElement.innerHTML = `
                        <div class="message-avatar" style="background: ${getRandomColor()}">
                            ${getInitials('You')}
                        </div>
                        <div class="message-content">
                            <div class="message-header">
                                <div class="message-username">You</div>
                                <div class="message-time">Just now</div>
                            </div>
                            <div class="message-text">${messageText}</div>
                        </div>
                    `;
                    messagesArea.appendChild(messageElement);
                    
                    // Clear input
                    messageInput.value = '';
                    
                    // Scroll to bottom
                    messagesArea.scrollTop = messagesArea.scrollHeight;
                    
                    // Simulate response after a delay
                    setTimeout(() => {
                        simulateResponse();
                    }, 1000 + Math.random() * 3000);
                }
            }

            // Simulate response from another user
            function simulateResponse() {
                const responses = [
                    "I understand how you feel. Thanks for sharing that.",
                    "That's really insightful. I've had similar experiences.",
                    "You're not alone in feeling this way. I'm here for you.",
                    "That sounds really tough. How are you coping with it?",
                    "I appreciate you opening up about this. It takes courage.",
                    "Have you tried any strategies that help when you feel this way?",
                    "Your words resonate with me. Thank you for sharing.",
                    "I'm here to listen if you want to talk more about it."
                ];
                
                const randomUser = users[Math.floor(Math.random() * users.length)];
                const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                
                const messagesArea = document.getElementById('messagesArea');
                const messageElement = document.createElement('div');
                messageElement.className = 'message';
                messageElement.innerHTML = `
                    <div class="message-avatar" style="background: ${getRandomColor()}">
                        ${getInitials(randomUser.name)}
                    </div>
                    <div class="message-content">
                        <div class="message-header">
                            <div class="message-username">${randomUser.name}</div>
                            <div class="message-time">Just now</div>
                        </div>
                        <div class="message-text">${randomResponse}</div>
                    </div>
                `;
                messagesArea.appendChild(messageElement);
                
                // Scroll to bottom
                messagesArea.scrollTop = messagesArea.scrollHeight;
            }

            // Interactive elements that follow cursor
            document.addEventListener('mousemove', function(e) {
                if (Math.random() > 0.95) {
                    createInteractiveElement(e.clientX, e.clientY);
                }
            });
            
            function createInteractiveElement(x, y) {
                const element = document.createElement('div');
                element.classList.add('interactive-element');
                
                const size = Math.random() * 20 + 5;
                element.style.width = `${size}px`;
                element.style.height = `${size}px`;
                element.style.left = `${x - size/2}px`;
                element.style.top = `${y - size/2}px`;
                
                document.body.appendChild(element);
                
                // Animate the element
                setTimeout(() => {
                    element.style.transform = `scale(${Math.random() * 5 + 2})`;
                    element.style.opacity = '0';
                }, 10);
                
                // Remove the element after animation
                setTimeout(() => {
                    element.remove();
                }, 1000);
            }

            // Event listeners
            document.getElementById('sendButton').addEventListener('click', sendMessage);
            
            document.getElementById('messageInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });

            // Navbar interaction
            const navItems = document.querySelectorAll('.nav-item');
            
            navItems.forEach(item => {
                item.addEventListener('click', function() {
                    // Remove active class from all items
                    navItems.forEach(navItem => {
                        navItem.classList.remove('active');
                    });
                    
                    // Add active class to clicked item
                    this.classList.add('active');
                    
                    // Get the navigation text
                    const navText = this.querySelector('span').textContent;
                    console.log(`Navigating to ${navText}`);
                });
            });

            // Initialize the page
            populateUsersList();
            populateMessages();
        });
    </script>
</body>
</html>